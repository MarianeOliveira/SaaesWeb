<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:poue="http://primefaces.org/ui/extensions"
      >

    <h:body>
        <ui:composition template="/template/reduzido.xhtml">
            <ui:define name="estilos-extras">
                .nome-cliente {font-size:11px;line-height: 25px;}
            </ui:define>
            <ui:define name="corpo">

                <div class="row ">
                    <h:form id="formPrincipal">
                        <p:growl id="messages"/>
                        <div style="min-height: 730px;">

                            <p:tabView id="tabs" activeIndex="#{cadastrar.activeIndex}" dynamic="true" cache="false">
                                <p:ajax event="tabChange" listener="#{cadastrar.onTabChange}"/>


                                <!--Cadastro de Docente-->
                                <p:tab id="tabDocente" title="Docente">
                                    <p:fieldset legend="Inserir Docente" 
                                                style="margin-bottom:20px"
                                                toggleable="true" 
                                                toggleSpeed="500"
                                                collapsed="true">

                                        <div class="row">
                                            <div class="col-xs-3">
                                                <h:outputText value="Nome completo " />
                                            </div>
                                            <div class="col-xs-8">
                                                <p:inputText id="addNomeDocente" 
                                                             style="width: 90%;" 
                                                             value="#{cadastrar.t300IesNova.nome}"
                                                             >
                                                    <p:ajax event="change"/>
                                                </p:inputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <h:outputText value="Instituição " />
                                            </div>
                                            <div class="col-xs-8">
                                            <p:selectOneMenu  value="#{cadastrar.t300IesSeld}" >
                                                <f:selectItem itemLabel="Selecione a Instituição" noSelectionOption="true"/>
                                                <f:selectItems value="#{cadastrar.t300list}" 
                                                               var="t300" 
                                                               itemLabel="#{t300.nome} - #{t300.campus}" 
                                                               itemValue="#{t300}"  />
                                                <p:ajax update="selcCurso" 
                                                        event="change" 
                                                        listener="#{cadastrar.onSelectIes()}" 
                                                        />
                                            </p:selectOneMenu>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <h:outputText value="Curso " />
                                            </div>
                                            <div class="col-xs-8">
                                            <p:selectOneMenu  id="selcCurso"
                                                              value="#{cadastrar.t400NovoCurso}" >
                                                <f:selectItem itemLabel="Selecione o curso" noSelectionOption="true"/>
                                                <f:selectItems value="#{cadastrar.t400List}" 
                                                               var="t400" 
                                                               itemLabel="#{t404.nome}" 
                                                               itemValue="#{t400}"  />
<!--                                                <p:ajax update="@form" 
                                                        event="change" 
                                                        listener="#{cc.attrs.listener}" 
                                                        />-->
                                            </p:selectOneMenu>
                                                </div>
                                        </div>

                                        <div class="row space5">
                                            <div class="col-xs-3 col-xs-offset-3">
                                                <p:commandButton value="Inserir" 
                                                                 styleClass="ui-priority-primary" >
                                                    <p:ajax listener="#{cadastrar.insereNovaIes}" update="@form:messages"/>
                                                </p:commandButton>
                                            </div>

                                            <div class="col-xs-2 col-xs-offset-1">
                                                <p:commandButton value="Limpar" onclick="window.location.reload();"/>
                                            </div>

                                        </div>

                                    </p:fieldset> 
                                    
                                     <div class="row">
                                        <div class="col-xs-6">
                                            <p:dataTable
                                                id="tbDocente"
                                                value="#{cadastrar.t200DocenteList}"
                                                var="t200"
                                                styleClass="ui-datatable"
                                                widgetVar="tbTes"
                                                rows="15"
                                                paginatorPosition="bottom"
                                                emptyMessage="Nenhum curso cadastrado."
                                                >
                                                <p:ajax event="rowSelect"  update="@form" />
                                                <f:facet name="header">
                                                    Docentes Cadastrados
                                                </f:facet>
                                                <p:column headerText="Nome do Docente" 
                                                          styleClass="colunaTab">
                                                    <p:outputLabel value="#{t200.nome}"/>
                                                </p:column>
                                                <p:column headerText="Campus"
                                                          styleClass="colunaTab">
                                                    <p:outputLabel value="#{t200.expExercDocenciaEduc}"/>
                                                </p:column>
                                                <p:column headerText="Excluir"
                                                          style="width: 5px;"
                                                          styleClass="colunaTab">
                                                    <p:commandButton title="Excluir"
                                                                     ajax="false" 
                                                                     icon="ui-icon-disk"
                                                                     >
                                                        <p:fileDownload value="" />
                                                    </p:commandButton>
                                                </p:column>

                                            </p:dataTable>
                                        </div>

                                    </div>
                                </p:tab>

                                <!--Cadastro de Coordenador-->
                                <p:tab id="tabCoord" title="Coordenador">
                                    <p:fieldset legend="Basic" style="margin-bottom:20px">

                                        Coordenador
                                    </p:fieldset> 
                                     <div class="row">
                                        <div class="col-xs-9">
                                            <p:dataTable
                                                id="tbCoord"
                                                value="#{cadastrar.t201CoordList}"
                                                var="t201"
                                                styleClass="ui-datatable"
                                                widgetVar="tbTes"
                                                rows="15"
                                                paginatorPosition="bottom"
                                                emptyMessage="Nenhum curso cadastrado."
                                                >
                                                <p:ajax event="rowSelect"  update="@form" />
                                                <f:facet name="header">
                                                    Coordenadores Cadastrados
                                                </f:facet>
                                                <p:column headerText="Nome do Coordenador" 
                                                          styleClass="colunaTab">
                                                    <p:outputLabel value="#{t201.nome}"/>
                                                </p:column>
                                                <p:column headerText="Atuação"
                                                          styleClass="colunaTab">
                                                    <p:outputLabel value="#{t201.atuacaoCoord}"/>
                                                </p:column>
                                                <p:column headerText="Regime de Trabalho"
                                                          styleClass="colunaTab">
                                                    <p:outputLabel value="#{t201.regimeTrab}"/>
                                                </p:column>
                                                <p:column headerText="Excluir"
                                                          style="width: 5px;"
                                                          styleClass="colunaTab">
                                                    <p:commandButton title="Excluir"
                                                                     ajax="false" 
                                                                     icon="ui-icon-disk"
                                                                     >
                                                        <p:fileDownload value="" />
                                                    </p:commandButton>
                                                </p:column>

                                            </p:dataTable>
                                        </div>

                                    </div>
                                </p:tab>

                                <!--Biografias-->
                                <p:tab id="tabBiog" title="Biografias">
                                    <h:form>
                                        <p:mindmap value="#{mindmapView.root}" style="width: 100%;height: 600px;border: 1px solid black;">
                                            <p:ajax event="select" listener="#{mindmapView.onNodeSelect}" />
                                            <p:ajax event="dblselect" listener="#{mindmapView.onNodeDblselect}" update="output" oncomplete="PF('details').show();" />
                                        </p:mindmap>

                                        <p:dialog widgetVar="details" header="Node Details" resizable="false" modal="true" showEffect="fade" hideEffect="fade">
                                            <h:outputText id="output" value="#{minmapView.selectedNode.data}" />
                                        </p:dialog> 
                                    </h:form>
                                </p:tab>

                                <!--Cadastro de IES-->
                                <p:tab id="tabIes" title="IES">
                                    <p:fieldset legend="Nova Instituição" 
                                                style="margin-bottom:20px"
                                                toggleable="true" 
                                                toggleSpeed="500"
                                                collapsed="true">

                                        <div class="row">
                                            <div class="col-xs-3">
                                                <h:outputText value="Nome da Instituição " />
                                            </div>
                                            <div class="col-xs-8">
                                                <p:inputText id="addNomeCurso" 
                                                             style="width: 90%;" 
                                                             value="#{cadastrar.t300IesNova.nome}"
                                                             >
                                                    <p:ajax event="change"/>
                                                </p:inputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <h:outputText value="Campus " />
                                            </div>
                                            <div class="col-xs-8">
                                                <p:inputText id="campus" 
                                                             style="width: 90%;" 
                                                             value="#{cadastrar.t300IesNova.campus}">
                                                    <p:ajax event="change"/>
                                                </p:inputText>
                                            </div>
                                        </div>

                                        <div class="row space5">
                                            <div class="col-xs-3 col-xs-offset-3">
                                                <p:commandButton value="Inserir" 
                                                                 styleClass="ui-priority-primary" >
                                                    <p:ajax listener="#{cadastrar.insereNovaIes}" update="@form:messages"/>
                                                </p:commandButton>
                                            </div>

                                            <div class="col-xs-2 col-xs-offset-1">
                                                <p:commandButton value="Limpar" onclick="window.location.reload();"/>
                                            </div>

                                        </div>

                                    </p:fieldset> 

                                    <div class="row">
                                        <div class="col-xs-6">
                                            <p:dataTable
                                                id="tbIes"
                                                value="#{cadastrar.t300list}"
                                                var="t300"
                                                styleClass="ui-datatable"
                                                widgetVar="tbTes"
                                                rows="15"
                                                paginatorPosition="bottom"
                                                emptyMessage="Nenhum curso cadastrado."
                                                >
                                                <p:ajax event="rowSelect"  update="@form" />
                                                <f:facet name="header">
                                                    Instituições Cadastradas
                                                </f:facet>
                                                <p:column headerText="Nome da Instituição" 
                                                          styleClass="colunaTab">
                                                    <p:outputLabel value="#{t300.nome}"/>
                                                </p:column>
                                                <p:column headerText="Campus"
                                                          styleClass="colunaTab">
                                                    <p:outputLabel value="#{t300.campus}"/>
                                                </p:column>
                                                <p:column headerText="Excluir"
                                                          style="width: 5px;"
                                                          styleClass="colunaTab">
                                                    <p:commandButton title="Excluir"
                                                                     ajax="false" 
                                                                     icon="ui-icon-disk"
                                                                     >
                                                        <p:fileDownload value="" />
                                                    </p:commandButton>
                                                </p:column>

                                            </p:dataTable>
                                        </div>

                                    </div>
                                </p:tab>

                                <!--Cadastro de Curso-->
                                <p:tab id="tabCursos" title="Cursos">

                                    <p:fieldset legend="Cadastrar Novo Curso"
                                                toggleable="true" 
                                                toggleSpeed="500"
                                                collapsed="true"
                                                style="margin-bottom:20px; alignment-adjust: central;">

                                        <div class="row">
                                            <div class="col-xs-3">
                                                <h:outputText value="Nome do Curso " />
                                            </div>
                                            <div class="col-xs-8">
                                                <p:inputText id="nomeCurso" 
                                                             style="width: 90%;" 
                                                             value="">
                                                    <!--<p:ajax event="change" onstart="buscar()"/>-->
                                                </p:inputText>
                                            </div>
                                        </div>


                                        <div class="row ">
                                            <div class="col-xs-3">
                                                <h:outputLabel value="Instituição de Ensino"   />
                                            </div>
                                            <div class="col-xs-9">
                                                <p:selectOneMenu id="det"
                                                                 value="Teste"
                                                                 rendered="true" 

                                                                 filter="true"
                                                                 filterMatchMode="contains"
                                                                 >
                                                    <f:selectItem itemLabel="Selecione..." noSelectionOption="true" />
                                                    <f:selectItem itemLabel="Faculdade de Pará de Minas" itemValue="0" />


                                                </p:selectOneMenu>         
                                            </div>

                                        </div>

                                        <div style="border-top: 1px solid #aaa; " class="space4"/>
                                        <div class="row">
                                            <div class="col-xs-3">
                                                <h:outputText value="Numero de Estudantes " />
                                                <p:inputText id="numEstudantes" 
                                                             style="width: 90%;" 
                                                             value="">
                                                </p:inputText>
                                            </div>
                                            <div class="col-xs-3">
                                                <h:outputText value="Numero de Disciplinas " />
                                                <p:inputText style="width: 90%;" 
                                                             value="">
                                                </p:inputText>
                                            </div>
                                            <div class="col-xs-3">
                                                <h:outputText value="Numero de Egressos " />
                                                <p:inputText style="width: 90%;" 
                                                             value="">
                                                </p:inputText>
                                            </div>

                                        </div>
                                        <div class="row ">
                                            <div class="col-xs-3">
                                                <h:outputText value="Carga Horária " />
                                                <p:inputText style="width: 90%;" 
                                                             value="">
                                                </p:inputText>
                                            </div>
                                            <div class="col-xs-3">
                                                <h:outputText value="Duração(anos) " />
                                                <p:inputText style="width: 90%;" 
                                                             value="">
                                                </p:inputText>
                                            </div>
                                            <div class="col-xs-3">
                                                <h:outputText value="Número de Vagas " />
                                                <p:inputText style="width: 90%;" 
                                                             value="">
                                                </p:inputText>
                                            </div>
                                        </div>

                                        <div class="row space5">
                                            <div class="col-xs-3 col-xs-offset-3">
                                                <p:commandButton value="Inserir" styleClass="ui-priority-primary"/>
                                            </div>

                                            <div class="col-xs-2 col-xs-offset-1">
                                                <p:commandButton value="Limpar"/>
                                            </div>

                                        </div>
                                    </p:fieldset>
                                    <div class="row space4">
                                        <div class="row space1">
                                            <p:dataTable
                                                id="tbCursoTes"
                                                value=""
                                                var="t100"
                                                styleClass="ui-datatable"
                                                widgetVar="tbTes"
                                                rows="15"
                                                paginatorPosition="bottom"
                                                emptyMessage="Nenhum curso cadastrado."
                                                >
                                                <p:ajax event="rowSelect"  update="@form" />
                                                <f:facet name="header">
                                                    Cursos Cadastrados
                                                </f:facet>
                                                <p:column style="width:5px">
                                                    <p:rowToggler />
                                                </p:column>
                                                <p:column headerText="Curso" 
                                                          styleClass="colunaTab">
                                                    Agronomia
                                                </p:column>
                                                <p:column headerText="IES"
                                                          styleClass="colunaTab">
                                                    UnB
                                                </p:column>
                                                <p:rowExpansion >
                                                    <p:dataTable
                                                        style="font-size: 8pt; width: 60%"
                                                        id="tbCur"
                                                        value=""
                                                        var="t100"
                                                        rows="15"
                                                        paginatorPosition="bottom"
                                                        >
                                                        <p:column headerText="Qnt Estudantes"
                                                                  style="width: 50px;"
                                                                  styleClass="colunaTab">
                                                            22
                                                        </p:column>
                                                        <p:column headerText="Disciplinas" 
                                                                  style="width: 50px;"
                                                                  styleClass="colunaTab">
                                                            12
                                                        </p:column>
                                                        <p:column headerText="Carga Horaria(H)" 
                                                                  style="width: 50px;"
                                                                  styleClass="colunaTab">
                                                            600
                                                        </p:column>
                                                        <p:column headerText="Duração(Períodos)" 
                                                                  style="width: 50px;"
                                                                  styleClass="colunaTab">
                                                            6
                                                        </p:column>

                                                        <p:column headerText="Num Vagas" 
                                                                  style="width: 50px;"
                                                                  styleClass="colunaTab">
                                                            <h:outputText value="40" >
                                                                <!--<f:convertDateTime pattern="dd/MM/yyyy" />-->
                                                            </h:outputText>
                                                        </p:column>
                                                    </p:dataTable>
                                                </p:rowExpansion>

                                            </p:dataTable>
                                        </div>
                                        <h:panelGroup id="consultaCurso" layout="block" styleClass="row space4">
                                            <h:panelGroup layout="block" rendered="true">
                                                <div style="text-align: center;">
                                                    <div id="visualizacao-padrao">
                                                        <div id="visualizacao-padrao-texto">Selecione um curso acima para visualizar.</div>
                                                    </div>
                                                </div>
                                            </h:panelGroup>
                                            <h:panelGroup styleClass="space4 page-container " layout="block" rendered="false">


                                                <div class="row">
                                                    <div class="col-xs-12 text-center">
                                                        <p:commandButton value="Editar" />
                                                    </div>
                                                </div>
                                            </h:panelGroup>

                                        </h:panelGroup>


                                        <div class="col-xs-1">
                                            <p:outputLabel value="Datas entre:"/>
                                        </div>
                                        <div class="col-xs-11">
                                            <p:calendar id="dataIncio" pattern="dd/MM/yyyy" mindate="01/01/2015"  >
                                                <p:ajax event="dateSelect" oncomplete="buscar()" />
                                            </p:calendar>
                                            <span> e </span>
                                            <p:calendar id="dataFim" size="40" pattern="dd/MM/yyyy"  mindate="01/01/2015" >
                                                <p:ajax event="dateSelect" oncomplete="buscar()" />
                                            </p:calendar>
                                        </div>
                                    </div>

                                </p:tab>




                            </p:tabView>

                        </div>
                    </h:form>
                </div>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
